# 数据库自动初始化

## 功能说明

运行 `node server.js` 时自动完成：
- ✅ 检查并创建 `music_app` 数据库
- ✅ 检查并创建 4 个数据表（不覆盖已有数据）

## 启动示例

首次运行：
```bash
node server.js

# 输出：
🔍 检查数据库是否存在...
📦 数据库不存在，开始创建 music_app 数据库...
✅ 数据库 music_app 创建成功
🔍 检查数据表是否存在...
📋 创建 users 表...
✅ users 表创建成功
📋 创建 favorites 表...
✅ favorites 表创建成功
📋 创建 history 表...
✅ history 表创建成功
📋 创建 DownloadedSongs 表...
✅ DownloadedSongs 表创建成功
✅ 数据库连接完成，所有表已就绪
🎵 Server running on http://localhost:3000
```

后续运行：
```bash
✅ 数据库 music_app 已存在
✅ 所有表已存在
✅ 数据库连接完成，所有表已就绪
🎵 Server running on http://localhost:3000
```

## 配置修改

修改 `db.js` 中的数据库连接信息：
```javascript
user: 'sa',           // SQL 用户名
password: '123',      // 密码
server: 'localhost'   // 服务器地址
```

## 注意事项

- 确保 SQL Server 已启动
- 确保用户有创建数据库权限
- 已有数据不会被覆盖

